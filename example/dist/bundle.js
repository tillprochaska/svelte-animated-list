function noop(){}function assign(e,t){for(var n in t)e[n]=t[n];return e}function appendNode(e,t){t.appendChild(e)}function insertNode(e,t,n){t.insertBefore(e,n)}function detachNode(e){e.parentNode.removeChild(e)}function reinsertChildren(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}function createFragment(){return document.createDocumentFragment()}function createElement(e){return document.createElement(e)}function createText(e){return document.createTextNode(e)}function createComment(){return document.createComment("")}function addListener(e,t,n){e.addEventListener(t,n,!1)}function removeListener(e,t,n){e.removeEventListener(t,n,!1)}function destroyBlock(e,t){e.u(),e.d(),t[e.key]=null}function outroAndDestroyBlock(e,t){e.o(function(){destroyBlock(e,t)})}function updateKeyedEach(e,t,n,i,s,r,a,o,c,d,l,u){for(var f=e.length,m=r.length,h=f,p={};h--;)p[e[h].key]=h;var _=[],g={},v={};for(h=m;h--;){var y=r[h][i],k=a[y];k?s&&k.p(n,u(h)):(k=d(t,y,u(h))).c(),_[h]=g[y]=k,y in p&&(v[y]=Math.abs(h-p[y]))}var b=null,x={},N={},w=c?outroAndDestroyBlock:destroyBlock;function C(e){e[l](o,b&&b.first),b=a[e.key]=e,m--}for(;f&&m;){var E=_[m-1],I=e[f-1],T=E.key,A=I.key;E===I?(b=E,f--,m--):g[A]?!a[T]||x[T]?C(E):N[A]?f--:v[T]>v[A]?(N[T]=!0,C(E)):(x[A]=!0,f--):(w(I,a),f--)}for(;f--;){g[(I=e[f]).key]||w(I,a)}for(;m;)C(_[m-1]);return _}function blankObject(){return Object.create(null)}function destroy(e){this.destroy=noop,this.fire("destroy"),this.set=this.get=noop,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function _differs(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function dispatchObservers(e,t,n,i,s){for(var r in t)if(n[r]){var a=i[r],o=s[r],c=t[r];if(c)for(var d=0;d<c.length;d+=1){var l=c[d];l.__calling||(l.__calling=!0,l.call(e,a,o),l.__calling=!1)}}}function fire(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,t)}function get(e){return e?this._state[e]:this._state}function init(e,t){e._observers={pre:blankObject(),post:blankObject()},e._handlers=blankObject(),e._bind=t._bind,e.options=t,e.root=t.root||e,e.store=e.root.store||t.store}function observe(e,t,n){var i=n&&n.defer?this._observers.post:this._observers.pre;return(i[e]||(i[e]=[])).push(t),n&&!1===n.init||(t.__calling=!0,t.call(this,this._state[e]),t.__calling=!1),{cancel:function(){var n=i[e].indexOf(t);~n&&i[e].splice(n,1)}}}function on(e,t){if("teardown"===e)return this.on("destroy",t);var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}}function set(e){this._set(assign({},e)),this.root._lock||(this.root._lock=!0,callAll(this.root._beforecreate),callAll(this.root._oncreate),callAll(this.root._aftercreate),this.root._lock=!1)}function _set(e){var t=this._state,n={},i=!1;for(var s in e)this._differs(e[s],t[s])&&(n[s]=i=!0);i&&(this._state=assign(assign({},t),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(dispatchObservers(this,this._observers.pre,n,this._state,t),this._fragment.p(n,this._state),dispatchObservers(this,this._observers.post,n,this._state,t)))}function callAll(e){for(;e&&e.length;)e.shift()()}function _mount(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)}function _unmount(){this._fragment&&this._fragment.u()}var proto={destroy:destroy,get:get,fire:fire,observe:observe,on:on,set:set,teardown:destroy,_recompute:noop,_set:_set,_mount:_mount,_unmount:_unmount,_differs:_differs},methods={handleChange:function(){var e=this;this.clearAllTimers();var t=this.getSavedItems(),n=this.getCurrentItems(),i=this.diff(t,n);this.animateItems(i).then(function(){e.saveCurrentItems()})},animateItems:function(e){var t=this;return Object.entries(e).forEach(function(e){e[0];var n=e[1];"show"===n.action&&t.showItem(n),"hide"===n.action&&t.hideItem(n),"move"===n.action&&t.moveItem(n)}),new Promise(function(e,n){t.setTimer(function(){e()},t.get("duration"))})},showItem:function(e){this.animateStyles(e,{opacity:0},{opacity:1})},hideItem:function(e){this.animateStyles(e,{opacity:1},{opacity:0})},moveItem:function(e){this.animateStyles(e,{transform:"translate("+-1*e.rect.left+"px, "+-1*e.rect.top+"px)"},{transform:"translate(0, 0)"})},animateStyles:function(e,t,n){var i=this,s=e.element.style.cssText;Object.assign(e.element.style,t),window.setTimeout(function(){e.element.style.transitionDuration=i.get("duration")+"ms",e.element.style.transitionEasing="ease-in-out",e.element.style.transitionProperty=Object.keys(t).join(", "),Object.assign(e.element.style,n)},0),this.setTimer(function(){e.element.style.cssText=s},this.get("duration"))},diff:function(e,t){var n=Object.assign({},e,t),i={};for(key in n){var s=e[key],r=t[key];s&&r&&!r.itemWrapper.dataset.isHiding&&s.itemWrapper.parentNode&&(i[key]={key:key,action:"move",itemWrapper:s.itemWrapper,element:s.element,rect:this.getRectDiff(s.rect,r.rect)}),s&&r&&r.itemWrapper.dataset.isHiding&&(i[key]={key:key,action:"hide",itemWrapper:s.itemWrapper,element:s.element,rect:s.rect}),(!s&&r||s&&r&&!s.itemWrapper.parentNode)&&(i[key]={key:key,action:"show",itemWrapper:r.itemWrapper,element:r.element,rect:r.rect})}return i},getRectDiff:function(e,t){var n={};for(prop in t)n[prop]=t[prop]-e[prop];return n},getCurrentItems:function(){var e=this.refs.wrapper.querySelectorAll(".svelte-animated-list-item"),t={};return Array.from(e).forEach(function(e){t[e.dataset.key]={key:e.dataset.key,element:e.children[0],rect:e.children[0].getBoundingClientRect(),itemWrapper:e}}),t},saveCurrentItems:function(){this.savedItems=this.getCurrentItems()},getSavedItems:function(){return this.savedItems},setTimer:function(e,t){this.timers=this.timers||[];var n=new function(e,t){var n=this;this.callback=e,this.cleared=!1,window.setTimeout(function(){n.clear()},t),this.clear=function(){n.cleared||(n.cleared=!0,n.callback())}}(e,t);return this.timers.push(n),n},clearAllTimers:function(){this.timers=this.timers||[],this.timers.forEach(function(e){e.clear()}),this.timers=[]}};function oncreate(){this.set({duration:parseInt(this.get("duration"))}),this.saveCurrentItems(),this.observe("items",this.handleChange)}function add_css(){var e=createElement("style");e.id="svelte-jk0a1m-style",e.textContent=".svelte-animated-list-wrapper.svelte-jk0a1m{display:contents}",appendNode(e,document.head)}function create_main_fragment(e,t){var n,i=e._slotted.default;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="svelte-animated-list-wrapper svelte-jk0a1m",n.dataset.duration=t.duration,n.dataset.easing=t.easing},m:function(t,s){insertNode(n,t,s),i&&appendNode(i,n),e.refs.wrapper=n},p:function(e,t){e.duration&&(n.dataset.duration=t.duration),e.easing&&(n.dataset.easing=t.easing)},u:function(){detachNode(n),i&&reinsertChildren(n,i)},d:function(){e.refs.wrapper===n&&(e.refs.wrapper=null)}}}function List(e){init(this,e),this.refs={},this._state=assign({},e.data),this._slotted=e.slots||{},document.getElementById("svelte-jk0a1m-style")||add_css();var t=oncreate.bind(this);e.root||(this._oncreate=[]),this.slots={},this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push(t),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function data(){return{isHiding:!1}}function oncreate$1(){var e=this,t=parseInt(function(){for(var t=e.refs.item;!t.classList.contains("svelte-animated-list-wrapper");)t=t.parentElement;return t}().dataset.duration),n=this._fragment.u;this._fragment.u=function(){e.refs.item.dataset.isHiding=!0;var i=e.refs.item.children[0],s=i.getBoundingClientRect();Object.assign(i.style,{position:"absolute",top:s.top+"px",left:s.left+"px",width:s.width+"px",height:s.height+"px"}),window.setTimeout(function(){n()},t)}}function add_css$1(){var e=createElement("style");e.id="svelte-vei8bg-style",e.textContent=".svelte-animated-list-item.svelte-vei8bg{display:contents}",appendNode(e,document.head)}function create_main_fragment$1(e,t){var n,i,s=e._slotted.default;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className=i="svelte-animated-list-item "+(t.isHiding?"is-hiding":"")+" svelte-vei8bg",n.dataset.key=t.key},m:function(t,i){insertNode(n,t,i),s&&appendNode(s,n),e.refs.item=n},p:function(e,t){e.isHiding&&i!==(i="svelte-animated-list-item "+(t.isHiding?"is-hiding":"")+" svelte-vei8bg")&&(n.className=i),e.key&&(n.dataset.key=t.key)},u:function(){detachNode(n),s&&reinsertChildren(n,s)},d:function(){e.refs.item===n&&(e.refs.item=null)}}}function Item(e){init(this,e),this.refs={},this._state=assign(data(),e.data),this._slotted=e.slots||{},document.getElementById("svelte-vei8bg-style")||add_css$1();var t=oncreate$1.bind(this);e.root||(this._oncreate=[]),this.slots={},this._fragment=create_main_fragment$1(this,this._state),this.root._oncreate.push(t),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function data$1(){return{items:[3,2,1].map(function(e){return{id:e}})}}assign(assign(List.prototype,methods),proto),assign(Item.prototype,proto);var methods$1={add:function(){var e=this.get("items");e.unshift({id:e.length+1}),this.set({items:e})},remove:function(){var e=this.get("items");e.shift(),this.set({items:e})},shuffle:function(){var e=this.get("items").sort(function(){return.5-Math.random()});this.set({items:e})},reset:function(){this.set({items:[3,2,1].map(function(e){return{id:e}})})}};function add_css$2(){var e=createElement("style");e.id="svelte-x6dku4-style",e.textContent=".controls.svelte-x6dku4{padding:.5rem}.wrapper.svelte-x6dku4{display:flex;flex-wrap:wrap;max-width:500px}.box.svelte-x6dku4{box-sizing:border-box;width:33.333%;padding:2rem;background-color:#eee;border:1px solid #fff;font-size:2rem;text-align:center}",appendNode(e,document.head)}function create_main_fragment$2(e,t){var n,i,s,r,a,o,c,d,l,u,f,m,h,p=[],_=blankObject();function g(t){e.add()}function v(t){e.remove()}function y(t){e.shuffle()}function k(t){e.reset()}for(var b=t.items,x=0;x<b.length;x+=1){var N=b[x].id;p[x]=_[N]=create_each_block(e,N,assign(assign({},t),{each_value:b,item:b[x],item_index:x}))}var w=new List({root:e.root,slots:{default:createFragment()},data:{items:t.items,duration:500,easing:"ease-in-out"}});return e.refs.list=w,{c:function(){for(n=createElement("div"),(i=createElement("button")).textContent="Add",s=createText("\n    "),(r=createElement("button")).textContent="Remove",a=createText("\n    "),(o=createElement("button")).textContent="Shuffle",c=createText("\n    "),(d=createElement("button")).textContent="Reset",l=createText("\n\n"),u=createElement("div"),f=createText("\n        "),x=0;x<p.length;x+=1)p[x].c();m=createComment(),h=createText("\n    "),w._fragment.c(),this.h()},h:function(){addListener(i,"click",g),addListener(r,"click",v),addListener(o,"click",y),addListener(d,"click",k),n.className="controls svelte-x6dku4",u.className="wrapper svelte-x6dku4"},m:function(e,t){for(insertNode(n,e,t),appendNode(i,n),appendNode(s,n),appendNode(r,n),appendNode(a,n),appendNode(o,n),appendNode(c,n),appendNode(d,n),insertNode(l,e,t),insertNode(u,e,t),appendNode(f,w._slotted.default),x=0;x<p.length;x+=1)p[x].m(w._slotted.default,null);appendNode(m,w._slotted.default),appendNode(h,w._slotted.default),w._mount(u,null)},p:function(t,n){var i=n.items;p=updateKeyedEach(p,e,t,"id",1,i,_,m.parentNode,!1,create_each_block,"m",function(e){return assign(assign({},n),{each_value:i,item:i[e],item_index:e})});var s={};t.items&&(s.items=n.items),w._set(s)},u:function(){detachNode(n),detachNode(l),detachNode(u)},d:function(){for(removeListener(i,"click",g),removeListener(r,"click",v),removeListener(o,"click",y),removeListener(d,"click",k),x=0;x<p.length;x+=1)p[x].d();w.destroy(!1),e.refs.list===w&&(e.refs.list=null)}}}function create_each_block(e,t,n){var i,s,r,a,o,c=n.item,d=(n.each_value,n.item_index,c.id),l=new Item({root:e.root,slots:{default:createFragment()},data:{key:c.id}});return{key:t,first:null,c:function(){i=createComment(),s=createText("\n                "),r=createElement("div"),a=createText(d),o=createText("\n            "),l._fragment.c(),this.h()},h:function(){r.className="box svelte-x6dku4",this.first=i},m:function(e,t){insertNode(i,e,t),appendNode(s,l._slotted.default),appendNode(r,l._slotted.default),appendNode(a,r),appendNode(o,l._slotted.default),l._mount(e,t)},p:function(e,t){c=t.item,t.each_value,t.item_index,e.items&&d!==(d=c.id)&&(a.data=d);var n={};e.items&&(n.key=c.id),l._set(n)},u:function(){detachNode(i),l._unmount()},d:function(){l.destroy(!1)}}}function App(e){init(this,e),this.refs={},this._state=assign(data$1(),e.data),document.getElementById("svelte-x6dku4-style")||add_css$2(),e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$2(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}assign(assign(App.prototype,methods$1),proto);var app=new App({target:document.querySelector("main")});
//# sourceMappingURL=bundle.js.map
